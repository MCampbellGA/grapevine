<% content_for :head do %>
  <%= render 'devise/registrations/stripe_tag_includes' %>
  <%= render 'shared/form_js_includes' %>
<% end %>


<h2>Edit <%= resource_name.to_s.humanize %></h2>

<div class="row">
    <p style="text-align:center;">Feel free to update your user and location information in case anything has changed.</p>

<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :validate => true, :html => { :class => 'form-horizontal', :method => :put }) do |user_form| %>
  <%= devise_error_messages! %>

  <div class="span5 offset1 user-info">
          <h3>Your Information</h3>

            <div class="control-group">
              <label class="control-label">First Name</label>
              <div class="controls">
                <%= user_form.text_field :first_name %>
              </div>
            </div>
            <div class="control-group">
              <label class="control-label">Last Name</label>
              <div class="controls">
                <%= user_form.text_field :last_name %>
              </div>
            </div>
            <div class="control-group">
              <label class="control-label">Email</label>
              <div class="controls">
                <%= user_form.email_field :email, :validate => true %>
              </div>
            </div>
            <div class="control-group">
              <label class="control-label">Phone Number</label>
              <div class="controls">
                <%= user_form.phone_field :phone_number %>
              </div>
            </div>
            <div class="control-group">
              <label class="control-label">Password</label>
              <div class="controls">
                <%= user_form.password_field :password, :validate => { :presence => true, :format => true } %><i>(leave blank if you don't want to change it)</i><br />
              </div>
            </div>
            <div class="control-group">
              <label class="control-label">Retype Password</label>
              <div class="controls">
                <%= user_form.password_field :password_confirmation %><i>(we need your current password to confirm your changes)</i><br />
              </div>
            </div>

        
        </div><!-- /.user-info -->

      <div class="span5 biz-info">
        <h3>Your Business Information</h3>
          <%= user_form.fields_for :locations, :validate => true do |location_fields| %>
 
            <div class="control-group">
              <label class="control-label">Business Name</label>
              <div class="controls">
                <%= location_fields.text_field :name %> 
              </div>
            </div>
            <div class="control-group">
              <label class="control-label">Address</label>
              <div class="controls">
                <%= location_fields.text_field :street_address, :id => 'addresspicker_map' %>

              </div>
              <div id="map"></div>
                <%= location_fields.hidden_field :lat, :id => 'lat' %>
                <%= location_fields.hidden_field :long, :id => 'lng' %>
            </div>
          <% end %>

  <div><%= user_form.submit "Update" %></div>
<% end %>

<h3>Cancel my account</h3>

<p>Unhappy? <%= link_to "Cancel my account", registration_path(resource_name), :confirm => "Are you sure?", :method => :delete %>.</p>

<%= link_to "Back", :back %>
