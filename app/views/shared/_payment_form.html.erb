<% content_for :head do %>
  <%= render 'devise/registrations/stripe_tag_includes' %>
  <%= render 'shared/form_js_includes' %>
<% end %>

		<!-- Payment form -->
		<div class="span5 well">

			<h4>
				<% if @status == "trialing" %>
					<span>You&rsquo;re currently on our Trial Plan.</span> 
					<span>Your trial period has expired</span> 
					Upgrade today.
				<% end %>
			</h4>

			<!-- to display errors returned by createToken -->
		    <span class="payment-errors"></span>

			<%= form_for @subscription, :html => { :class => 'payment-form', :id => 'payment-form' } do |f| %>

				<%= f.hidden_field :stripe_card_token %>
				<%= f.hidden_field :last_four %>

				<noscript>
		          <p>This form requires Javascript to use</p>
		        </noscript>
		        <!-- these fields are disabled before submission and are never transmitted back to rails -->
				<div class="control-group">
					<label class="control-label">Name on card</label>
					<div class="controls">
						<%= text_field_tag :name_on_card %>
					</div>
				</div>

				<div id="credit-card" style="<%= @subscription.last_four ? "display:none" : "display:block" %>">
					<div class="control-group">
						<label class="control-label">Card Number</label>
						<div class="controls">
							<%= text_field_tag :credit_card_number, params[:credit_card_number], :id => 'credit-card-number', :class =>  'input-large', :disabled => true %>
							<span class="help-block">Visa, MasterCard, Discover, AMEX</span>
						</div>
					</div>
					<!-- <div class="control-group">
						<label class="control-label">Address</label>
						<div class="controls">
							<input type="text" placeholder="Street Address" class="input-large">
							<input type="text" placeholder="City" class="input-medium">
							<input type="text" placeholder="TX" class="input-mini">
							<input type="text" placeholder="Zip Code" class="input-small">
						</div>
					</div> -->
					<div class="control-group">
						<%= label_tag :expiry_date, 'Expiration', :class => 'control-label' %>
						<div class="controls controls-row">
							<%= date_select "", :exp_month, {:discard_day => true, :discard_year => true, :use_month_numbers => true, :disabled => true }, {:id => "card-expiry-month", :class => "input-mini"} %>
							<%= date_select "", :exp_year, {:discard_month => true, :use_month_numbers => true, :start_year => Date.today.year, :end_year => Date.today.year + 25, :disabled => true }, { :id => 'card-expiry-year', :class => "input-small"} %>
							<span class="help-block">Your credit card details will be sent directly to our payment processor</span>
						</div>
					</div>
					<div class="control-group">
						<label class="control-label">CVV</label>
						<div class="controls">
							<%= text_field_tag :cvc, params[:cvc], :id => "card-cvc", :maxlength => 4, :class => "input-mini", :disabled => true %>
							<span class="help-block">3 digit number on back of card, 4 digit on front for AMEX</span>
						</div>
					</div>
				</div>
				<% if @status == "trialing" %>
					<%= f.hidden_field :end_trial, { :value => true } %>
				<% end %>
				<div class="form-actions">
					<%= f.button "Signup", :id => 'monthly-plan', :type => 'submit', :class => "btn purple_button" %>
					<span class="help-block">Call us for </span>
				</div>

			<% end %>
		</div><!-- /.span6 -->
		<!-- /.payment-form -->